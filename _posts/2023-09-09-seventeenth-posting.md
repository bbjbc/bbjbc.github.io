---
title: "[Network] REST API μ΄ν•΄"
categories: [network, javascript]
tags: [express, javascript, rest api]
author-profile: true
sidebar_main: true
main: true
toc: true
toc_sticky: true
---

# μ—΄μΌκ³± λ²μ§Έ ν¬μ¤ν…

μ•λ…•ν•μ„Έμ”! μ—΄μΌκ³± λ²μ§Έ ν¬μ¤ν…μΌλ΅ μ°Ύμ•„λµ™κ² λμ–΄ λ°κ°‘μµλ‹λ‹¤!β™¥

κ²°κµ­ μκ°•μ‹ μ²­ λ€μ„±κ³µ ν–μ–΄μ” γ…γ…γ…γ… 18ν•™μ μ„ μ΅μ•λ‹¤λ” λ§μ΄μ—μ© γ…γ… <br>
μ¤ν”μ†μ¤κ³Όλ©μ€ μ–΄λ ¤μΈ κ²ƒμΌλ΅ μμΈ΅λμ–΄ λ‹¤λ¥Έ κ³Όλ©μ„ μ΅μ•μ–΄μ” :)π <br>

μ¤λμ ν¬μ¤ν… λ‚΄μ©μ€ **REST API**μ— κ΄€ν• μ΄μ•ΌκΈ°μ…λ‹λ‹¤. <br/>
μμ„Έν• λ‚΄μ©μ„ μ•μ•„λ³΄λ¬ κ°‘μ‹λ‹¤β—οΈ

**[Boongranii] Here We Go π”¥**

Udemyμ NodeJS-The Complete Guide (incl MVC, REST APIs, GraphQL, Deno) κ°•μλ¥Ό λ°”νƒ•μΌλ΅ μ‘μ„±λ κΈ€μ…λ‹λ‹¤.

---

# 1οΈβƒ£ REST APIλ€?

## π μ‚¬μ© μ΄μ 

> **REST** - **Re**presentational **S**tate **T**ransfer<br>
> κ°„λ‹¨ν λ§ν•λ©΄ μ‚¬μ©μ μΈν„°νμ΄μ¤ λ€μ‹  λ°μ΄ν„° μ „μ†΅μ„ μλ―Έν•©λ‹λ‹¤.

λ§μ€ μµμ‹  μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…λ“¤μ€ λ§μ€ HTML μ½ν…μΈ λ¥Ό ν¬ν•¨ν•μ§€ μ•μ€ μ΄κΈ° HTML νμ΄μ§€λ§ κ°€μ Έμ¤λ” λ€μ‹  JavaScript μ¤ν¬λ¦½νΈ νμΌμ„ λ§μ΄ λ΅λ”©ν•λ©° μ¤ν¬λ¦½νΈ νμΌμ΄ λ°±μ—”λ“ RESTful APIμ— λ„λ‹¬ν•΄ μ‚¬μ©μ μΈν„°νμ΄μ¤μ— μ¬λ λ”λ§ν•΄μ•Ό ν•λ” λ°μ΄ν„°λ§ κ°€μ Έμ¤λ„λ΅ ν•©λ‹λ‹¤.

ν΄λ¦­λ§ ν•λ©΄ μƒλ΅ κ³ μΉ¨μ„ κΈ°λ‹¤λ¦΄ ν•„μ” μ—†μ΄ ν• νμ΄μ§€μ— λ¨Έλ¬Όλ©΄μ„ λ λ”λ§ λλ” λ°μ΄ν„°λ§ λ°°ν›„μ—μ„ λ°”λ€κ³  μ‚¬μ©μ μΈν„°νμ΄μ¤λ” λΈλΌμ°μ € μΈ΅ JavaScriptλ¥Ό ν†µν•΄ λ λ”λ§λ©λ‹λ‹¤.

HTML λ€μ‹  λ°μ΄ν„°λ§ μ „μ†΅ν•κ³  ν΄λΌμ΄μ–ΈνΈ λ° ν”„λ΅ νΈμ—”λ“κ°€ λ¨λ°”μΌ μ•±μ΄λ‚ SPAλ“  μ „μ†΅λ°›μ€ λ°μ΄ν„°λ΅ μ‘μ—…ν•λ„λ΅ ν•λ” κ²ƒμ…λ‹λ‹¤. λ¶„λ¦¬λ ν”„λ΅ νΈμ—”λ“λ¥Ό κµ¬μ¶•ν•΄μ•Ό ν•λ” μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ μ΄ REST APIκ°€ μΆ‹μ€ ν•΄κ²°μ±…μ΄ λ  κ²ƒμ…λ‹λ‹¤β—οΈ<br/>
λν• μ‘λ‹µκ³Ό μ”μ²­ λ°μ΄ν„°λ§ λ°”λ€κ³  μ „μ²΄μ μΈ μ„λ²„λ…Όλ¦¬λ” λ°”λ€μ§€ μ•μµλ‹λ‹¤. μ‘λ‹µμ΄λ‚ λ°μ΄ν„° μΈ΅λ©΄μ—μ„λ‚ λ‹¤λ¥Ό λΏμ΄κ³  μ„λ²„μ—μ„ μΌμ–΄λ‚λ” μΌμ€ λ³€ν™”κ°€ μ—†λ‹¤λ” κ²ƒμ…λ‹λ‹¤.

<br>

## π μ›λ¦¬

μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈκ°€ μμ„ λ• ν΄λΌμ΄μ–ΈνΈλ” λ¨λ°”μΌ μ•±μ΄λ‚ SPAμ΄κ³  μ„λ²„μ— APIλ¥Ό κµ¬μ¶•ν•©λ‹λ‹¤. μ΄ λ• μ—¬λ¬ ν΄λΌμ΄μ–ΈνΈλ¥Ό μ„ν•΄ ν•λ‚μ APIλ¥Ό μ‚¬μ©ν•  μ μμµλ‹λ‹¤. <br>
κΈ°μ΅΄ μ›Ή μ•± λ“± μ• ν”λ¦¬μΌ€μ΄μ…μ— μ„λΉ„μ¤ APIλ¥Ό μ¶”κ°€ν•κ±°λ‚ μ„λΉ„μ¤λ¥Ό νλ§¤ν•κΈ° μ„ν•΄ μ§μ ‘ μ„λΉ„μ¤ APIλ¥Ό κµ¬μ¶•ν•  μλ„ μμµλ‹λ‹¤. μ΄μ²λΌ λ€λ¶€λ¶„μ κ²½μ°μ— ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ μ‚¬μ΄μ— λ°μ΄ν„°λ¥Ό κµν™ν•©λ‹λ‹¤. μ–΄λ–¤ ν•μ‹μΌλ΅ κµν™ν• κΉμ”?

HTML μ™Έμ—λ„ μ”μ²­κ³Ό μ‘λ‹µμ— λ¶€μ°©ν•  μ μλ” λ‹¤μ–‘ν• λ°μ΄ν„° μ ν•μ΄ μμµλ‹λ‹¤. μΌλ° text, XML, JSON λ“± μ…λ‹λ‹¤.

1. **HTML**<br>
   EJS λ·°λ¥Ό λ λ”λ§ν•  λ• λΈλΌμ°μ €μ— HTML μ½”λ“λ¥Ό λ³΄λ‚΄ λ·°κ°€ μ„λ²„μ— λ λ”λ§ λλ„λ΅ ν•κ³  λ λ”λ§ κ³Όμ •μ κ²°κ³Όκ°€ HTML νμ΄μ§€μΈ HTML μ½”λ“μ€μµλ‹λ‹¤. μ΄λ ‡κ² λ°μ΄ν„°λ¥Ό λ³΄λ‚Έ κ²ƒμ²λΌ HTML μ½”λ“λ” λ°μ΄ν„°μ™€ κµ¬μ΅°λ¥Ό ν¬ν•¨ν•©λ‹λ‹¤. <br>
   κµ¬μ΅°μ™€ λ””μμΈμ— μ¶”κ°€ν•  HTML μ”μ†μ™€ CSS μ¤νƒ€μΌ λ“±μ΄ μκ³  μ”μ†λ“¤ μ‚¬μ΄μ—λ” λ°μ΄ν„°κ°€ μμµλ‹λ‹¤. μ΄λ“¤μ΄ μ •λ¦¬λμ–΄ μμ–΄λ„ κµ¬μ΅°ν™”ν•λ” λ°©λ²•μ€ μ •ν•΄μ Έ μμ§€ μ•κΈ° λ•λ¬Έμ— λ¶ν•„μ”ν•κ² λ¶„μ„μ΄ μ–΄λ ¤μ›μ§‘λ‹λ‹¤.

2. **Plain Text**<br>
   μΌλ°μ μΈ ν…μ¤νΈλ” λ°μ΄ν„°λ§ ν¬ν•¨ν•κ³  κµ¬μ΅°λ‚ λ””μμΈ μ”μ†λ” μ—†μΌλ―€λ΅ UIλ¥Ό κµ¬μ¶•ν•  μλ” μ—†μµλ‹λ‹¤. μΌλ° ν…μ¤νΈλ΅ λ°μ΄ν„°λ¥Ό μ „λ‹¬ν•λ” κ²½μ°λ” μ»΄ν“¨ν„°κ°€ μ΄ν•΄ν•κΈ° μ–΄λ µκΈ° λ•λ¬Έμ— λ¶ν•„μ”ν•κ² λ¶„μ„μ΄ μ–΄λ µμµλ‹λ‹¤. κ·Έλ¬λ―€λ΅ λ°μ΄ν„° κµν™μ— μΆ‹μ€ λ°©λ²•μ΄ μ λ€ μ•„λ‹™λ‹λ‹¤.

3. **XML**<br>
   μΌλ° ν…μ¤νΈλ³΄λ‹¤ μ»΄ν“¨ν„°κ°€ μ½κΈ° μ‰½μµλ‹λ‹¤. λ…ν™•ν• κµ¬μ΅°λ¥Ό μ •μν•  μλ„ μμ§€λ§ νΉλ³„ν• XML parserκ°€ ν•„μ”ν•©λ‹λ‹¤. μ”μ†λ¥Ό μ „μ†΅ν•λ” λ°μ΄ν„°μ— μΌμΆ…μ μ¤λ²„ν—¤λ“λ¥Ό μ¶”κ°€ν•΄ ν•µμ‹¬ λ°μ΄ν„°κ°€ μ•„λ‹λΌ λ°μ΄ν„°λ¥Ό μ½κΈ° μ„ν•΄ μ¶”κ°€μ μΌλ΅ ν…μ¤νΈλ„ λ§μ΄ ν•„μ”ν•©λ‹λ‹¤.

4. **JSON**<br>
   κ°€μ¥ ν›λ¥­ν• λ°μ΄ν„° ν•μ‹μΈ JSONμ…λ‹λ‹¤. μ΄κ²ƒμ€ UIλ¥Ό κ°€μ •ν•μ§€ μ•κ³  κΈ°κ³„κ°€ μ½μ„ μ μμµλ‹λ‹¤. XMLλ³΄λ‹¤ κ°„κ²°ν•΄μ„ JSλ΅ λ³€ν™ν•κΈ° μ‰½λ‹¤λ” μ μ΄ μ„λ²„μ—μ„ μ‘μ—…ν•κ±°λ‚ λΈλΌμ°μ €μ JS μ‘μ—… μ‹ ν° μ΄μ μ΄ λ  μ μμµλ‹λ‹¤. <br>
   λ”°λΌμ„ λ°μ΄ν„°λ§ μ „μ†΅ν•κ³  μ‹¶μ„ λ• κ°€μ¥ μΆ‹μ€ ν•μ‹μ΄λ©° APIμ™€ μ†ν†µν•λ” λ° ν”ν μ‚¬μ©ν•©λ‹λ‹¤.

λ‹¤λ¥Έ λ°μ΄ν„° ν•μ‹λ“¤μ€ JSON λ§νΌ λ°μ΄ν„° μ „μ†΅μ— μ ν•©ν•μ§€ μ•μΌλ―€λ΅ μ•μΌλ΅λ” JSONμ„ μ‚¬μ©ν•  κ²ƒμ…λ‹λ‹¤.

<br>

## π λΌμ°ν…

ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„λ²„λ΅ μ–΄λ–»κ² μ”μ²­μ„ λ³΄λ‚ΌκΉμ”?<br>
μ§€κΈκΉμ§€λ” HTMLμ— λ§ν¬λ¥Ό μ¶”κ°€ν•κ±°λ‚ νΌμ— λ²„νΌμ„ μ¶”κ°€ν•μ—¬ μ•΅μ…κ³Ό λ©”μ†λ“λ¥Ό μ •μν–μµλ‹λ‹¤.

REST API λν• μ”μ²­κ³Ό ν•¨κ» HTTP λ©”μ†λ“λ΅ μ„λ²„μ— μλ” κ²½λ΅λ¥Ό λ³΄λƒ…λ‹λ‹¤. μ„λ²„ μΈ΅ λΌμ°ν…μ— κ²½λ΅λ¥Ό μ •μν•κ³  λ“¤μ–΄μ¤λ” μ”μ²­μ„ κΈ°λ‹¤λ¦¬λ©° κ²½λ΅κ°€ μ²λ¦¬ν•  HTTP λ©”μ†λ“λ¥Ό μ •μν•΄μ„ λ¨λ“  κ²½λ΅μ— μ•„λ¬΄ μ”μ²­μ΄λ‚ λ„λ‹¬ν•μ§€ μ•λ„λ΅ ν•©λ‹λ‹¤. λΈλΌμ°μ € μ‘μ—… μ‹ μ”μ²­μ€ ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° λΉ„λ™κΈ°μ‹ JavaScriptλ¥Ό ν†µν•΄ λ³΄λ‚΄μ§‘λ‹λ‹¤.

```js
POST /post
GET /posts
GET /posts/:postId
```

μ„μ™€ κ°™μ€ κ²ƒλ“¤μ„ API μ—”λ“ ν¬μΈνΈλΌκ³  λ¶€λ¦…λ‹λ‹¤. POSTλ‚ GET κ°™μ€ HTTP λ©”μ†λ“μ™€ κ° κ²½λ΅λ¥Ό λ§ν•λ” κ²ƒμ…λ‹λ‹¤. <br>
REST APIμ— μ—”λ“ ν¬μΈνΈλ¥Ό μ •μν•κ³  μ”μ²­μ΄ μ—”λ“ ν¬μΈνΈμ— λ„λ‹¬ν–μ„ λ• μ„λ²„μ— μ‹¤ν–‰ν•  λ…Όλ¦¬λ¥Ό μ •μν•©λ‹λ‹¤.

<br>

## π HTTP λ©”μ†λ“

HTTP λ©”μ†λ“λ” GETμ΄λ‚ POST μ΄μ™Έμ—λ„ λ§μ΄ μ΅΄μ¬ν•©λ‹λ‹¤. λΈλΌμ°μ €μ— μλ” JavaScriptλ” λ‹¤λ£¨μ§€ μ•λ” κ²½μ°μ—λ” GETμ΄λ‚ POSTλ§ μ‚¬μ© κ°€λ¥ν•©λ‹λ‹¤. λΈλΌμ°μ € νΉμ€ HTML μ”μ†κ°€ κΈ°λ³Έμ μΌλ΅ μ•κ³  μλ” κΈ°λ³Έμ μΈ λ©”μ†λ“μΈ κ²ƒμ΄μ£ .

JavaScriptλ¥Ό ν†µν•΄ λΉ„λ™κΈ°μ‹ μ”μ²­μ„ μ²λ¦¬ν•  λ•λ‚ HTTP ν΄λΌμ΄μ–ΈνΈλ¥Ό μ‚¬μ©ν•  λ•λ” λ‹¤μ–‘ν• HTTP λ©”μ†λ“λ¥Ό μ‚¬μ© κ°€λ¥ν•©λ‹λ‹¤.

- **GET**<br>
  Get a Resource from the Server
- **POST**<br>
  Post a Resource to the Server (i.e. create or append Resource)
- **PUT**<br>
  Put a Resource onto the Serve (i.e. create or overwrite a Resource)
- **PATCH**<br>
  Update parts of an existing Resource on the Server
- **DELETE**<br>
  Delete a Resource on the Server

<br>

## π REST API ν•µμ‹¬ μ›μΉ™

1. **Uniform Interface** <br>
   Clearly defined API endpoints with clearly defined request + response data structure<br>
2. **Stateless Interactions**<br>
   Server and client don't store any connection history, every request is handled seperately
3. **Cacheable**<br>
   Servers may set caching headers to allow the client to cache responses
4. **Client-Server**<br>
   Server and client are separated, client is not concerned with persistent data storage
5. **Layered System**<br>
   Server may forward requests to other APIs
6. **Code on Demand**<br>
   Executable code may be transferred from server to client

<br>

- **μΌκ΄€λ μΈν„°νμ΄μ¤ μ›μΉ™**<br>
  APIμ— λ…ν™•ν μ •μλ API μ—”λ“ ν¬μΈνΈλ¥Ό κ°€μ Έμ•Ό ν•λ‹¤λ” κ²ƒμ„ μλ―Έν•©λ‹λ‹¤. μ—”λ“ ν¬μΈνΈλ” λ…ν™•ν•κ² μ •μλ μ”μ²­ λ° μ‘λ‹µ λ°μ΄ν„° κµ¬μ΅°λ¥Ό κ°€μ§„ HTTP λ©”μ†λ“ λ° κ²½λ΅μ μ΅°ν•©μ…λ‹λ‹¤. <br>
  APIλ” μμΈ΅ κ°€λ¥ν•΄μ•Ό ν•κ³  κ³µκ°λ κ²½μ°μ—λ” λ¬Έμ„ν™”κ°€ μ λμ–΄ μμ–΄μ•Ό ν•©λ‹λ‹¤. λν•, μ—”λ“ ν¬μΈνΈμ— λ„λ‹¬ν•λ©΄ μΌμ–΄λ‚λ” μΌμ€ μ‹κ°„μ΄ μ§€λ‚λ„ λ°”λ€μ§€ μ•μ•„μ•Ό ν•λ©° μμΈ΅ κ°€λ¥ν•κ³  λ…ν™•ν•κ² μ •μ λμ–΄μ•Ό ν•©λ‹λ‹¤β—οΈ
- **λ¬΄μƒνƒ μƒνΈμ‘μ© μ›μΉ™**<br>
  μ΄κ²ƒμ€ μΈμ¦μ— μμ–΄ μ¤‘μ”ν• κ°λ…μ…λ‹λ‹¤. REST API κµ¬μ¶• μ‹ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” μ™„μ „ν λ¶„λ¦¬λμ–΄ νμ¤ν† λ¦¬λ¥Ό κ³µμ ν•μ§€ μ•μµλ‹λ‹¤. λ”°λΌμ„ μ—°κ²° νμ¤ν† λ¦¬κ°€ μ €μ¥λμ§€ μ•κ³  λ“¤μ–΄μ¤λ” λ¨λ“  μ”μ²­μ— λ€ν•΄ μ‚¬μ „ μ”μ²­μ„ λ³΄λ‚΄μ§€ μ•μ€ κ²ƒμΌλ΅ μ²λ¦¬ν•λ―€λ΅ μ–΄λ–¤ μ„Έμ…λ„ μ‚¬μ©ν•μ§€ μ•μµλ‹λ‹¤. <br>
  μ„λ²„κ°€ κ° μ”μ²­μ„ μ§μ ‘ λ“¤μ—¬λ‹¤λ³΄κ² λλ©° ν΄λΌμ΄μ–ΈνΈλ¥Ό μ „ν€ μ‹ κ²½ μ“°μ§€ μ•μµλ‹λ‹¤. APIλ¥Ό FEμ—μ„ κ°λ°ν•κΈ° μ„ν•΄ κ°™μ€ μ„λ²„μ—μ„ μ‹¤ν–‰ν•κ² λλ”λΌλ„ λ‘μ€ λ¶„λ¦¬λ μƒνƒλ΅ λ”°λ΅ μ‘λ™ν•μ—¬ λ°μ΄ν„°λ§ μ£Όκ³  λ°›μµλ‹λ‹¤. <br>
  λ”°λΌμ„ μƒλ΅μ΄ μ—”λ“ ν¬μΈνΈλ¥Ό μ„¤μ •ν•  λ•λ§λ‹¤ μ΄μ „ μ”μ²­κ³Ό λ…λ¦½μ μΌλ΅ κΈ°λ¥ν•λ”μ§€ ν™•μΈν•΄μ•Όλ§ ν•©λ‹λ‹¤.
- **μΊμ‹± μ›μΉ™**<br>
  μ΄κ²ƒμ€ REST APIμ—μ„ ν—¤λ”λ¥Ό μ „μ†΅ν•΄ ν΄λΌμ΄μ–ΈνΈμ—κ² μ‘λ‹µμ μ ν¨ κΈ°κ°„μ„ μ•λ ¤μ¤μΌλ΅μ¨ ν΄λΌμ΄μ–ΈνΈκ°€ μ‘λ‹µμ„ μΊμ‹± κ°€λ¥ν•λ„λ΅ ν•΄μ£Όλ” κΈ°λ¥μ…λ‹λ‹¤.
- **κ³„μΈµν• μ‹μ¤ν…**<br>
  ν΄λΌμ΄μ–ΈνΈκ°€ APIμ— μ”μ²­μ„ λ³΄λ‚Ό λ• ν•΄λ‹Ή μ”μ²­μ„ λ°›μ€ μ„λ²„κ°€ μ”μ²­μ„ μ¦‰μ‹ μ²λ¦¬ν•λ” λ€μ‹  λ‹¤λ¥Έ μ„λ²„λ΅ μ „λ‹¬ν•κ±°λ‚ λ¶„λ°°ν•  μ μλ‹¤λ” κ²ƒμ…λ‹λ‹¤.

---

# 2οΈβƒ£ μ”μ²­ λ° μ‘λ‹µ λ³΄λ‚΄κΈ°

REST APIλ” HTMLμ„ λ λ”λ§ν•μ§€ μ•κ³  λ°μ΄ν„°λ¥Ό ν†µν•΄ λ λ”λ§ν•λ‹¤κ³  ν–μ—μ£ .

[controllers/feed.js]

```js
exports.getPosts = (req, res, next) => {
  res.status(200).json({
    posts: [{ title: "First Post", content: "This is the first post!" }],
  });
};
```

`res.render`λ¥Ό λ” μ΄μƒ μ‚¬μ©ν•μ§€ μ•κ³  json λ©”μ†λ“λ¥Ό μ‚¬μ©ν•΄ μ¤λ‹λ‹¤. λ”λ―Έ λ°μ΄ν„°λ¥Ό λ„£μ–΄μ„ json ν•νƒλ΅ λ λ”λ§ λλ„λ΅ ν•©λ‹λ‹¤.

[routes/feed.js]

```js
const express = require("express");

const feedController = require("../controllers/feed");

const router = express.Router();

// GET /feed/posts
router.get("/posts", feedController.getPosts);

module.exports = router;
```

[app.js]

```js
const express = require("express");

const feedRoutes = require("./routes/feed");

const app = express();

app.use("/feed", feedRoutes);

app.listen(8080);
```

μ΄μ  μ„λ²„ μ‹¤ν–‰μ„ ν•μ—¬ `localhost:8080/feed/posts`λ΅ λ“¤μ–΄κ°‘λ‹λ‹¤. <br>

![rest](https://github.com/bbjbc/bbjbc.github.io/assets/102457140/9e15a0f6-1400-4c72-83d3-dbcafb9970ac)<br>

μ„μ™€ κ°™μ΄ json ν•μ‹μ λ°μ΄ν„°κ°€ λ λ”λ§λ κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.

ν•μ§€λ§ μ΄λ ‡κ² μ§μ ‘ μ•΅μ„Έμ¤ν•λ” κ²ƒμ€ λ²κ±°λ΅­κ³  κ³„νν–λ κ²ƒμ΄ μ•„λ‹™λ‹λ‹¤. λΈλΌμ°μ €μ— μ΄λ¥Ό μ…λ ¥ν•μ§€ μ•κ³ λ„ λΉ λ¥΄κ³  μ‰½κ² REST APIλ¥Ό ν…μ¤νΈν•λ” λ°©λ²•μ΄ μμµλ‹λ‹¤.

λΈλΌμ°μ €μ— μ…λ ¥ λ¶κ°€λ¥ν• post λΌμ°νΈλ¥Ό μ •μν•©λ‹λ‹¤.

[post Handler]

```js
exports.createPost = (req, res, next) => {
  const title = req.body.title;
  const content = req.body.content;
  res.status(201).json({
    message: "Post created successfully!",
    post: { id: new Date(), title: title, content: content },
  });
};
```

[routes]

```js
// POST /feed/post
router.post("/post", feedController.createPost);
```

μƒνƒ μ½”λ“ 201μ€ ν΄λΌμ΄μ–ΈνΈμ—κ² λ¦¬μ†μ¤ μƒμ„± μ„±κ³µμ„ μ•λ¦¬λ” μ½”λ“μ…λ‹λ‹¤.<br>
μ΄μ  λ°μ΄ν„°λ¥Ό νμ‹±ν•΄μ•Ό ν•©λ‹λ‹¤. bodyParserλ¥Ό ν†µν•΄ μ„¤μ •ν•μ€μ§€λ§ μ°λ¦¬λ” json λ°μ΄ν„°λ΅ μ‘μ—…ν•κ³  μμµλ‹λ‹¤. μ°λ¦¬κ°€ json λ°μ΄ν„°λ¥Ό λ°ν™ν•λ“― ν΄λΌμ΄μ–ΈνΈλ„ ν¬ν•¨ν•λ” μ”μ²­μ„ ν†µν•΄ APIμ™€ ν†µμ‹ ν•κ² λ©λ‹λ‹¤.

κ·Έλμ„ μ”μ²­κ³Ό μ‘λ‹µ λ‘ κ³³μ—μ„ json λ°μ΄ν„° ν•μ‹μ„ μ‚¬μ©ν•©λ‹λ‹¤.

```js
const bodyParser = require("body-parser");

app.use(bodyParser.urlencoded());
```

μ „μ— ν–λ“― `urlencoded`λ¥Ό νΈμ¶ν•μ—¬ μ΄κΈ° μ„¤μ • ν–μ—μµλ‹λ‹¤. μ΄κ²ƒμ€ `x-www-form-urlencoded` ν•μ‹μ λ°μ΄ν„°λ¥Ό λ‹΄κ³  μλ” λ°μ΄ν„° ν¬λ§· λλ” μ”μ²­μ— λ€ν•΄μ„λ” μΆ‹μ€ λ°©λ²•μ…λ‹λ‹¤. κ·Έλ¬λ‚ form λ°μ΄ν„°κ°€ ν•„μ”ν•μ§€ μ•μµλ‹λ‹¤. μ™λƒν•λ©΄ REST APIμ—μ„λ” νΌμ„ μ‚¬μ©ν•μ§€ μ•κΈ° λ•λ¬Έμ΄μ£ .

form λ°μ΄ν„°κ°€ μ—†λ” λ€μ‹  json λ©”μ†λ“λ΅ bodyParserλ¥Ό μ‚¬μ©ν•΄μ„ λ“¤μ–΄μ¤λ” μ”μ²­μΌλ΅λ¶€ν„° json λ°μ΄ν„°λ¥Ό λ¶„μ„ν•κ² λ©λ‹λ‹¤. μ΄κ²ƒμ€ application/jsonμ— μ‚¬μ©ν•κΈ° μΆ‹μ€ λ°©μ‹μΌλ΅ ν—¤λ”μ—μ„ λ³Ό μ μμµλ‹λ‹¤.

```js
app.use(bodyParser.json());
```

bodyμ—μ„ μ¶”μ¶ν•κΈ° μ„ν•΄ μ„μ™€ κ°™μ€ λ―Έλ“¤μ›¨μ–΄κ°€ ν•„μ”ν•©λ‹λ‹¤. λ“¤μ–΄μ¤λ” μ”μ²­μ΄ body ν•„λ“μ— μ¶”κ°€λλ” κ²ƒμ΄μ£ .

μ΄μ  μ΄κ²ƒμ„ ν…μ¤νΈ ν•΄λ³΄λ” λ§¤μ° νΈλ¦¬ν• νΉμ λ„κµ¬κ°€ μμµλ‹λ‹¤. κ·Έκ²ƒμ€ λ°”λ΅~ **Postman**μ…λ‹λ‹¤~
μ΄κ²ƒμ€ λ§¤μ° μ μ©ν• API κ°λ° λ„κµ¬μ…λ‹λ‹¤.<br>

![rest1](https://github.com/bbjbc/bbjbc.github.io/assets/102457140/4bad48c2-c00b-4d41-850f-8f6e58048122)<br>

μ—¬κΈ°μ— urlμ„ μ…λ ¥ν•μ—¬ HTTP λ©”μ†λ“λ¥Ό μ„ νƒν•μ—¬ μ”μ²­μ„ λ³΄λ‚Ό μ μμµλ‹λ‹¤. λν• μ›ν•λ” ν—¤λ”λ¥Ό μ¶”κ°€ν•΄μ„ μ•„λ μμ—­μ—μ„ μ‘λ‹µμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.

μ•„κΉ μ¶”κ°€ν• post λΌμ°νΈλ΅ λ„λ‹¬ μ‹μΌ λ³΄κ² μµλ‹λ‹¤. <br>

![rest2](https://github.com/bbjbc/bbjbc.github.io/assets/102457140/c7f6dd47-5087-4e5a-a2a4-c786b457b4c3)<br>

μ„μ½ body/json νƒ­μ—μ„ json λ°μ΄ν„°λ¥Ό μ‘μ„± κ°€λ¥ν•©λ‹λ‹¤. ν•„μ”ν• `title`, `content`λ¥Ό μ¶”κ°€ ν•΄μ£Όκ³  send ν•΄μ£Όλ©΄ μ•„λμ— μ‘λ‹µμ„ λ°›μ€ κ²ƒμ„ λ³Ό μ μμµλ‹λ‹¤. <br>
μ»¨νΈλ΅¤λ¬ μ•΅μ…μ—μ„ messageμ™€ μƒμ„±λ postλ΅ μ •μλ μ‘λ‹µμΈ κ²ƒμ…λ‹λ‹¤. μ‚¬μ§„ μ•„λκ°€ μμ‹  ν΄λΌμ΄μ–ΈνΈμ— λ€ν•΄ μΌλ°μ μΌλ΅ μ‚¬μ©ν•κ² λ  λ°μ΄ν„°μ…λ‹λ‹¤.

ν•„μ”ν• μ¶”κ°€ ν—¤λ” λ° λ³Έλ¬Έμ„ μ…λ ¥ν•΄μ„ λ¨λ“  μ—”λ“ν¬μΈνΈλ¥Ό ν…μ¤νΈν•  μ μμΌλ©° APIλ¥Ό ν…μ¤νΈν•λ”λ° ν•„μ”ν• κ²ƒμ„ κ°–μ¶”κ² λ©λ‹λ‹¤.

---

# 3οΈβƒ£ CORS

> **CORS** - **C**ross-**O**rigin **R**esource **S**haring<br>
> μ΄κ²ƒμ€ λΈλΌμ°μ €μ—μ„ κΈ°λ³Έμ μΌλ΅ ν—μ©λμ§€ μ•μµλ‹λ‹¤.

## π’΅ CORS μ¤λ¥

![cors](https://github.com/bbjbc/bbjbc.github.io/assets/102457140/84d78add-7bf5-4726-b1dc-704ad57858a4)<br>

CORS μ¤λ¥λ¥Ό λ³΄κΈ° μ„ν•΄μ„ μ„μ™€ κ°™μ΄ μ½”λ“νμ—μ„ λ‹¤μκ³Ό κ°™μ΄ μ‘μ„±ν•΄μ¤λ‹λ‹¤. <br>
fetch ν‚¤μ›λ“λ΅ μµμ‹  λΈλΌμ°μ €μ— λ‚΄μ¥λ fetch APIλ¥Ό μ‚¬μ©ν•μ—¬ μ”μ²­μ„ λ³΄λ‚΄κ³ μ ν•λ” μ„μ—μ„ μ •μν• λΌμ°νΈλ¥Ό μ‘μ„±ν•©λ‹λ‹¤. μ„μ™€ κ°™μ΄ μ‘μ„± ν›„ λ²„νΌμ„ ν΄λ¦­ν•κ³  μ½μ†”μ°½μ„ ν™•μΈν•λ©΄ μ΄λ ‡κ² μ¤λ¥κ°€ ν™•μΈλ©λ‹λ‹¤. <br>

![cors2](https://github.com/bbjbc/bbjbc.github.io/assets/102457140/f6e5e0c0-58cc-49b7-b507-9ffd6b3805be)<br>

μ„μ™€ κ°™μ΄ No 'Access-Control-Allow-Origin' headers is present μ¤λ¥κ°€ λ°μƒν•©λ‹λ‹¤.

μ΄λ” μµμ‹  μ›Ή μ•±μ΄λ‚ SPAμ—μ„ ν”ν λ³΄μ΄λ” μ¤λ¥λ΅ νΌλ™μ„ μΌμΌν‚¬ μ μμµλ‹λ‹¤.

<br>

## π’΅ CORS ν•΄κ²°λ²•

> **ν•΄κ²°λ²• β“**

μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈκ°€ μκ³  κ°™μ€ λ„λ©”μΈ, μλ¥Ό λ“¤μ–΄ localhost:8080 μ—μ„ μ‹¤ν–‰ μ¤‘μ΄λΌκ³  κ°€μ •ν•©λ‹λ‹¤. κ°™μ€ μ„λ²„μ—μ„ μ‹¤ν–‰ μ¤‘μ΄λΌλ©΄ λ¬Έμ μ—†μ΄ μ”μ²­κ³Ό μ‘λ‹µμ„ μ „μ†΅ κ°€λ¥ν•©λ‹λ‹¤. μ§€κΈκΉμ§€ HTML νμΌμ„ ν†µν•΄ μ„λ²„μ—μ„ λ λ”λ§ ν•μ—¬ μ”μ²­μ„ λ³΄λ‚Έ μ„λ²„μ™€ κ°™μ€ μ„λ²„μ—μ„ μ„λΉ„μ¤ λμ—κΈ° λ–„λ¬Έμ— λ¬Έμ μ—†μ΄ μ μ‘λ™ν• κ²ƒμ΄μ—μµλ‹λ‹¤.

κ·Έλ¬λ‚ ν΄λΌμ΄μ–ΈνΈ μ„λ²„κ°€ localhost:3000μ΄κ³  μ„λ²„ μΈ΅μ€ 8080μΈ λ‹¤λ¥Έ λ„λ©”μΈμ—μ„ μ‹¤ν–‰ μ¤‘μ΄λΌλ©΄ λ¬Έμ κ°€ λ°μƒν•λ” κ²ƒμ…λ‹λ‹¤.<br>
λ„λ©”μΈ κ°„, μ„λ²„ κ°„ κ·Έλ¦¬κ³  μ΄ λ‹¨μ–΄ λ»λ€λ΅ μ¶μ² κ°„ λ¦¬μ†μ¤ κ³µμ λ¥Ό λ§‰λ” λΈλΌμ°μ € λ³΄μ• μ¥μΉ λ•λ¬Έμ— CORS μ¤λ¥κ°€ λ°μƒν•κ² λ©λ‹λ‹¤.

λ‹¤μ–‘ν• ν΄λΌμ΄μ–ΈνΈμ—κ² μ„λ²„ λ°μ΄ν„°λ¥Ό μ κ³µν•΄μ•Ό ν•κ³  μ΄λ° ν΄λΌμ΄μ–ΈνΈλ“¤μ€ APIκ°€ μ‹¤ν–‰λλ” μ„λ²„μ™€ λ‹¤λ¥Έ μ„λ²„λ¥Ό μ‚¬μ©ν•  κ²ƒμ…λ‹λ‹¤. λ”°λΌμ„ CORS μ¤λ¥λ¥Ό ν•΄κ²°ν•΄μ•Ό ν•λ©° μ„μ™€ κ°™μ€ κ²½μ°μ—μ„λ” μ½”λ“νμ—μ„ μ‹¤ν–‰λλ” λΈλΌμ°μ €μ— ν„μ¬ μ„λ²„μ—μ„ μ „μ†΅ν•λ” μ‘λ‹µμ„ λ°›μ•„λ„ λλ‹¤κ³  μ•λ ¤μ•Ό ν•©λ‹λ‹¤.

π’¨ **μ—¬κΈ°μ„ μ¤‘μ”ν• μ **<br>
μ¤λ¥λ¥Ό λΈλΌμ°μ € μΈ΅ JavaScript μ½”λ“μ—μ„ ν•΄κ²°ν•λ ¤κ³  ν•μ§€λ§ μ΄κ²ƒμ€ λ¶κ°€λ¥ν•λ©° μ„λ²„μ—μ„λ§ ν•΄κ²° κ°€λ¥ν•©λ‹λ‹¤β—οΈ<br>
**μ„λ²„ μΈ΅ μ½”λ“μ—μ„ νΉμ ν—¤λ”λ¥Ό μ„¤μ •ν•λ©΄ λ©λ‹λ‹¤.**

```js
app.use(bodyParser.json()); // application/json

app.use((req, res, next) => {
  res.setHeader("Access-Control-Allow-Origin", "*");
  res.setHeader(
    "Access-Control-Allow-Methods",
    "GET, POST, PUT, PATCH, DELETE"
  );
  res.setHeader("Access-Control-Allow-Headers", "Content-Type, Authorization");
  next();
});

app.use("/feed", feedRoutes);
```

bodyParserμ™€ λΌμ°νΈ μ‚¬μ© μ‚¬μ΄μ— μ‘μ„± ν•΄μ£Όλ©΄ λ©λ‹λ‹¤. <br>
μΌλ°μ μΈ λ―Έλ“¤μ›¨μ–΄λ¥Ό μƒμ„±ν•΄μ„ `setHeader`λ¥Ό ν†µν•΄ μ‘λ‹µμ— ν—¤λ”λ¥Ό μ¶”κ°€ν•  μ μμµλ‹λ‹¤.

- **Access-Control-Allow-Origin**<br>
  μ΄ ν—¤λ”λ” μ„λ²„μ— μ—‘μ„Έμ¤λ¥Ό ν—μ©ν•  urlμ„ μ‘μ„±ν•λ©΄ λ©λ‹λ‹¤. \*μ„ ν†µν•΄ λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ μ—‘μ„Έμ¤λ¥Ό ν—μ© κ°€λ¥ν•©λ‹λ‹¤.
- **Access-Control-Allow-Methods**<br>
  μ΄ ν—¤λ”λ” νΉμ • μ¶μ²μ—μ„ μ»¨ν…μΈ , μ¦‰ λ°μ΄ν„°μ— μ•΅μ„Έμ¤ κ°€λ¥ν•λ„λ΅ ν—μ©ν•©λ‹λ‹¤. νΉμ • HTTP λ©”μ†λ“λ¥Ό ν—μ©ν•  κ²ƒμ΄λ©° ν΄λΌμ΄μ–ΈνΈμ— μ–΄λ–¤ λ©”μ†λ“κ°€ ν—μ©λλ”μ§€ μ•λ¦½λ‹λ‹¤. μ „λ¶€ ν—μ©ν•  ν•„μ”λ” μ—†μΌλ©° μ™Έλ¶€μ—μ„ μ‚¬μ© κ°€λ¥ν•λ„λ΅ ν•λ ¤λ” λ©”μ†λ“λ§ ν—μ©ν•λ©΄ λ©λ‹λ‹¤.
- **Access-Control-Allow-Headers**<br>
  ν΄λΌμ΄μ–ΈνΈκ°€ μ”μ²­μ— μ„¤μ •ν•  μ μλ” ν—¤λ”λ¥Ό μ§€μ •ν•΄ μ¤λ‹λ‹¤. `Content-Type` ν—¤λ”μ™€ `Authorization` ν—¤λ”λ” λ°λ“μ‹ μ§€μ •ν•΄μ•Ό ν•©λ‹λ‹¤. κ·Έλμ•Όλ§ ν΄λΌμ΄μ–ΈνΈκ°€ ν—¤λ”μ— μ¶”κ°€ μΈμ¦ λ°μ΄ν„°λ¥Ό ν¬ν•¨ν• μ”μ²­μ„ λ³΄λ‚Ό μ μκΈ° λ•λ¬Έμ…λ‹λ‹¤.

μ„μ™€ κ°™μ€ CORS ν—¤λ”λ¥Ό μ¶”κ°€ν•λ©΄ <br>

![cors3](https://github.com/bbjbc/bbjbc.github.io/assets/102457140/25533bd4-6e08-45b6-9603-4833cf9ff1d8)<br>

μ λ€λ΅ μ‘λ™ν•λ” κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.

<br>

π’¨ **POST μ”μ²­ λ³΄λ‚΄κΈ°**<br>

```js
postButton.addEventListener("click", () => {
  fetch("http://localhost:8080/feed/post", {
    method: "POST",
    body: {
      title: "A Codepen Post",
      content: "Created via Codepen",
    },
  })
    .then((res) => res.json())
    .then((resData) => console.log(resData))
    .catch((err) => console.log(err));
});
```

μ½”λ“νμ— λ‹¤μκ³Ό κ°™μ΄ postμ”μ²­ λ²„νΌμ„ λλ €μ„ λ• μƒκΈ°λ” μ½”λ“λ¥Ό μ‘μ„±ν•©λ‹λ‹¤.<br>

![cors4](https://github.com/bbjbc/bbjbc.github.io/assets/102457140/8601baee-43ce-44db-836b-3b22b7cd4099)<br>

λ²„νΌμ„ ν΄λ¦­ν•λ©΄ μ„μ™€ κ°™μ΄ μ½μ†”λ©λ‹λ‹¤. ν•μ§€λ§ titleκ³Ό contentλ” λ¨μ§€ μ•λ”λ°μ”. μ΄κ²ƒμ€ `Content-Type`μ΄ ν„μ¬ textλ΅ λμ–΄ μκΈ° λ•λ¬Έμ…λ‹λ‹¤. <br>

![cors5](https://github.com/bbjbc/bbjbc.github.io/assets/102457140/038f7f61-88af-41a7-9a25-7f645a31451a)<br>

μ΄κ²ƒμ€ application/jsonμ΄μ–΄μ•Ό ν•λ©° μ”μ²­ νμ΄λ΅λ“λ„ jsonλ°μ΄ν„°κ°€ μ•„λ‹κΈ° λ•λ¬Έμ— titleκ³Ό contentκ°€ λ¨μ§€ μ•λ” κ²ƒμ…λ‹λ‹¤. ν„μ¬ JavaScript κ°μ²΄μΈλ° μ΄λ” μ „μ†΅μ΄λ‚ μ²λ¦¬κ°€ λ¶κ°€λ¥ν•κΈ° λ•λ¬Έμ— μ„ μ½”λ“λ¥Ό λ°”κΏ” μ£Όμ–΄μ•Ό ν•©λ‹λ‹¤.

```js
postButton.addEventListener("click", () => {
  fetch("http://localhost:8080/feed/post", {
    method: "POST",
    body: JSON.stringify({
      title: "A Codepen Post",
      content: "Created via Codepen",
    }),
    headers: {
      "Content-Type": "application/json",
    },
  })
    .then((res) => res.json())
    .then((resData) => console.log(resData))
    .catch((err) => console.log(err));
});
```

JSON.stringifyλ” JavaScript κ°μ²΄λ¥Ό json ν•νƒλ΅ λ³€ν™ν•΄ μ£Όλ” κ²ƒμ΄κΈ° λ•λ¬Έμ— `title`κ³Ό `content`λ¥Ό json λ°μ΄ν„°λ΅ λ³€κ²½ ν•΄μ¤λ‹λ‹¤. κ·Έλ¦¬κ³  ν—¤λ”μ— 'application/json'μ„ μ¶”κ°€ν•΄ μ£Όλ©΄ λ©λ‹λ‹¤. <br>

![cors6](https://github.com/bbjbc/bbjbc.github.io/assets/102457140/d39da994-421c-4d3c-8235-e7c3eccab111)<br>

μ΄μ  λ°μ΄ν„°κ°€ μ λ€λ΅ μ „μ†΅ λ° μ¶”μ¶λμ–΄ μƒμ„±λ κ²μ‹λ¬Όμ— `title`κ³Ό `content`κ°€ ν‘μ‹λ©λ‹λ‹¤.

---

|                            REST κ°λ…                             |
| :--------------------------------------------------------------: |
|                  λ°μ΄ν„° μ¤‘μ‹¬μ΄λ©° UI λ…Όλ¦¬ κµν™ X                  |
|                μ—”λ“ ν¬μΈνΈλ¥Ό λ…Έμ¶μ‹ν‚¤λ” λ…Έλ“ μ„λ²„                |
|         μ”μ²­ λ° μ‘λ‹µ λ¨λ‘μ—μ„ JSON ν•μ‹μΌλ΅ λ°μ΄ν„° κµν™          |
|                        HTML νμ΄μ§€ λ°ν™ X                        |
| ν΄λΌμ΄μ–ΈνΈμ—μ„ μ™„μ „ν λ¶„λ¦¬λμ–΄ μ—°κ²° νμ¤ν† λ¦¬λ¥Ό κ³µμ ν•κ±°λ‚ μ €μ¥ X |
|       JSON ν•μ‹μΌλ΅ λ°μ΄ν„° μ²¨λ¶€ν•΄μ•Ό ν•λ©° ν—¤λ”λ΅ μ•λ ¤μ•Ό ν•¨        |
|              CORS ν—¤λ”λ¥Ό μ„¤μ •ν•μ—¬ λ°μ΄ν„° μ‚¬μ© μ•λ¦Ό               |

μ—¬κΈ°κΉμ§€ REST APIμ— λ€ν•΄μ„ μ΄ν•΄ ν•΄λ³΄μ•μµλ‹λ‹¤.

μ¤λλ„ ν¬μ¤ν… μ½μ–΄ μ£Όμ…”μ„ κ°μ‚¬ν•©λ‹λ‹¤π‘
